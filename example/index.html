<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>

        <title>Route Renderer Example</title>

        <style>
            html, body {
                height: 100%;
                
                margin: 0;

                overflow: hidden;
            }

            canvas {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>

    <body>
        <canvas id="canvas" width="1920" height="1080"></canvas>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"
            integrity="sha512-zhHQR0/H5SEBL3Wn6yYSaTTZej12z0hVZKOv3TwCUXT1z5qeqGcXJLLrbERYRScEDDpYIJhPC1fk31gqR783iQ=="
            crossorigin="anonymous"
            defer></script>

        <script type="module">
            import { RouteRenderer } from "../dist/index.js";
            import sessions from "./activities_009569ed-3cb9-431b-81e1-42ba4813161e.json" assert { type: "json" };

            const canvas = document.getElementById("canvas");

            if(canvas) {
                const paths = sessions.map((session) => session.locations.map((location, index) => {
                    return {
                        latitude: location.coords.latitude,
                        longitude: location.coords.longitude,
                        altitude: location.coords.altitude + (index / 100)
                    };
                }));

                const renderer = new RouteRenderer(canvas);

                /*renderer.setRawPaths([
                    [
                        { x: 0, y: 0, z: 1 },
                        { x: 0, y: 1, z: 1 },
                        { x: .5, y: 1.5, z: 1 },
                    ]
                ]);*/

                renderer.setPaths(paths, [
                    {
                        type: "elevation",
                        forwards: true,
                        interval: 1 * 1000,
                        repeat: true
                    }
                ]);
            }
        </script>
    </body>
</html>
