<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8"/>

        <title>Route Renderer Example</title>

        <style>
            html, body {
                height: 100%;
                
                margin: 0;

                overflow: hidden;
            }

            body {
                display: grid;

                grid-template-columns: 1fr 1fr;
                grid-template-rows: 1fr 1fr;
            }

            canvas {
                width: 100%;
                height: 100%;
            }
        </style>
    </head>

    <body>
        <canvas id="canvas1" width="1920" height="1080"></canvas>
        <canvas id="canvas2" width="1920" height="1080"></canvas>
        <canvas id="canvas3" width="1920" height="1080"></canvas>
        <canvas id="canvas4" width="1920" height="1080"></canvas>

        <script
            src="https://cdnjs.cloudflare.com/ajax/libs/gl-matrix/2.8.1/gl-matrix-min.js"
            integrity="sha512-zhHQR0/H5SEBL3Wn6yYSaTTZej12z0hVZKOv3TwCUXT1z5qeqGcXJLLrbERYRScEDDpYIJhPC1fk31gqR783iQ=="
            crossorigin="anonymous"
            defer></script>

        <script type="module">
            import { RouteRenderer } from "../dist/index.js";
            import sessions1 from "./activities_009569ed-3cb9-431b-81e1-42ba4813161e.json" assert { type: "json" };
            import sessions2 from "./activities_034e6944-b3bb-40b1-bd90-8a7fa08de0c5.json" assert { type: "json" };
            import sessions3 from "./activities_70300cf5-614d-4597-9b23-b57fa0426fa2.json" assert { type: "json" };

            {
                const paths = sessions1.map((session) => session.locations.map((location, index) => {
                    return {
                        latitude: location.coords.latitude,
                        longitude: location.coords.longitude,
                        altitude: location.coords.altitude + (index * .5)
                    };
                }));

                const canvas = document.getElementById("canvas1");

                const renderer = new RouteRenderer(canvas, {
                    topColor: [ 187, 135, 252, 255 ],
                    endBlockColor: [ 0, 0, 0, 255 ],

                    elevationGradient: true,

                    cameraRotation: [ 3, .5, 0 ],

                    cameraFov: 20
                });

                renderer.setPaths(paths, [
                    {
                        type: "elevation",
                        forwards: true,
                        interval: 2 * 1000,
                        repeat: true
                    }
                ]);
            }

            {
                const paths = sessions1.map((session) => session.locations.map((location, index) => {
                    return {
                        latitude: location.coords.latitude,
                        longitude: location.coords.longitude,
                        altitude: location.coords.altitude + (index * .5)
                    };
                }));

                const canvas = document.getElementById("canvas2");

                const renderer = new RouteRenderer(canvas, {
                    topColor: [ 187, 135, 252, 255 ],
                    endBlockColor: [ 0, 0, 0, 255 ],

                    elevationGradient: true,

                    cameraRotation: [ 3, .5, 0 ],

                    cameraFov: 20
                });

                renderer.setPaths(paths, [
                    {
                        type: "distance",
                        forwards: true,
                        interval: 2  * 1000,
                        repeat: true
                    }
                ]);
            }

            {
                const paths = sessions2.map((session) => session.locations.map((location, index) => {
                    return {
                        latitude: location.coords.latitude,
                        longitude: location.coords.longitude,
                        altitude: location.coords.altitude
                    };
                }));

                const canvas = document.getElementById("canvas3");

                const renderer = new RouteRenderer(canvas, {
                    topColor: [ 187, 135, 252, 255 ],
                    wallColor: [ 23, 26, 35, 255 ],

                    projectionZoomLevel: 4,

                    keepMinimumAltitude: true,

                    cameraFov: 45,
                    cameraRotation: [ 0, 2, 0 ],
                    cameraTranslation: [ 0, 0, -30 ]
                });

                renderer.setPaths(paths, []);
            }

            /*{
                const canvas = document.getElementById("canvas4");

                const renderer = new RouteRenderer(canvas, {
                    keepMinimumAltitude: true,

                    cameraFov: 20,

                    cameraRotation: [ 0, .5, 0 ]
                });

                renderer.setPaths([
                    [
                        { x: 0, y: 0, z: 1 },
                        { x: 0, y: 1, z: 1 },
                        { x: .5, y: 1.5, z: 2 },
                    ]
                ], [], false);
            }*/

            {
                const paths = sessions3.map((session) => session.locations.map((location, index) => {
                    return {
                        latitude: location.coords.latitude,
                        longitude: location.coords.longitude,
                        altitude: location.coords.altitude
                    };
                }));

                const canvas = document.getElementById("canvas4");

                const renderer = new RouteRenderer(canvas, {
                    topColor: [ 187, 135, 252, 255 ],
                    wallColor: [ 23, 26, 35, 255 ],

                    projectionZoomLevel: 4,

                    keepMinimumAltitude: true,
                    elevationGradient: true,

                    cameraFov: 45,
                    cameraRotation: [ -1.2, 2, 0 ],
                    cameraTranslation: [ 0, 0, -80 ]
                });

                renderer.setPaths(paths, []);
            }
        </script>
    </body>
</html>
